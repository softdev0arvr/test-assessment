{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nexport let TimerComponent = class TimerComponent {\n  constructor(http, toastr) {\n    this.http = http;\n    this.toastr = toastr;\n    this.countdown = 0;\n    this.isTimerRunning = false;\n    this.data = {};\n  }\n  ngOnInit() {\n    this.loadTimerConfiguration();\n  }\n  loadTimerConfiguration() {\n    this.http.get('https://localhost:7285/api/Timer/Data').subscribe(response => {\n      console.log(\"Response\", response);\n      this.data = response;\n      console.log(this.data);\n    }, error => {\n      this.toastr.error('Failed to load timer configuration.');\n      console.error(error);\n    });\n  }\n  startTimer() {\n    this.http.get('https://localhost:7285/api/Timer/Configure').subscribe(response => {\n      this.timerConfig = response;\n      this.isTimerRunning = true;\n      this.countdown = response;\n      this.toastr.success('Timer started.');\n      this.updateCountdown();\n    }, error => {\n      this.toastr.error('Failed to start timer.');\n      console.error(error);\n    });\n  }\n  stopTimer() {\n    this.http.post('https://localhost:7285/api/Timer/Stop', {}).subscribe(() => {\n      this.isTimerRunning = false;\n      this.toastr.success('Timer stopped.');\n    }, error => {\n      this.toastr.error('Failed to stop timer.');\n      console.error(error);\n    });\n  }\n  updateCountdown() {\n    if (this.isTimerRunning && this.countdown > 0) {\n      setTimeout(() => {\n        this.countdown--;\n        this.updateCountdown();\n      }, 1000);\n    } else {\n      this.toastr.success('Countdown completed.');\n      //Tell BE that timer has stopped\n      this.http.post('https://localhost:7285/api/Timer/Stop', {}).subscribe(() => {\n        this.isTimerRunning = false;\n        this.countdown = 0;\n      }, error => {\n        this.toastr.error('Failed to stop timer.');\n        console.error(error);\n      });\n    }\n  }\n};\nTimerComponent = __decorate([Component({\n  selector: 'app-timer',\n  templateUrl: './timer.component.html',\n  styleUrls: ['./timer.component.css']\n})], TimerComponent);","map":{"version":3,"names":["Component","TimerComponent","constructor","http","toastr","countdown","isTimerRunning","data","ngOnInit","loadTimerConfiguration","get","subscribe","response","console","log","error","startTimer","timerConfig","success","updateCountdown","stopTimer","post","setTimeout","__decorate","selector","templateUrl","styleUrls"],"sources":["D:\\Projects\\timer-app\\src\\app\\timer\\timer.component.ts"],"sourcesContent":["import { Component } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { ToastrService } from 'ngx-toastr';\n\n@Component({\n  selector: 'app-timer',\n  templateUrl: './timer.component.html',\n  styleUrls: ['./timer.component.css']\n})\n\nexport class TimerComponent {\n  \n  timerConfig: any;\n  countdown: number = 0;\n  isTimerRunning: boolean = false;\n  data: any = {};\n  constructor(private http: HttpClient, private toastr: ToastrService) { }\n\n  ngOnInit() {\n    this.loadTimerConfiguration();\n  }\n\n  loadTimerConfiguration() {\n    this.http.get<any>('https://localhost:7285/api/Timer/Data')\n      .subscribe(\n        (response) => {\n          console.log(\"Response\",response);\n          this.data = response;\n          console.log(this.data);\n        },\n        (error) => {\n          this.toastr.error('Failed to load timer configuration.');\n          console.error(error);\n        }\n      );\n  }\n\n  startTimer() {\n    this.http.get<number>('https://localhost:7285/api/Timer/Configure')\n      .subscribe(\n        (response) => {\n          this.timerConfig = response;\n          this.isTimerRunning = true;\n          this.countdown = response;\n          this.toastr.success('Timer started.');\n          this.updateCountdown();\n        },\n        (error) => {\n          this.toastr.error('Failed to start timer.');\n          console.error(error);\n        }\n      );\n  }\n\n  stopTimer() {\n    this.http.post('https://localhost:7285/api/Timer/Stop', {})\n      .subscribe(\n        () => {\n          this.isTimerRunning = false;\n          this.toastr.success('Timer stopped.');\n        },\n        (error) => {\n          this.toastr.error('Failed to stop timer.');\n          console.error(error);\n        }\n      );\n  }\n\n  updateCountdown() {\n    if (this.isTimerRunning && this.countdown > 0) {\n      setTimeout(() => {\n        this.countdown--;\n        this.updateCountdown();\n      }, 1000);\n    } else {\n      this.toastr.success('Countdown completed.');\n      //Tell BE that timer has stopped\n      this.http.post('https://localhost:7285/api/Timer/Stop', {})\n      .subscribe(\n        () => {\n          this.isTimerRunning = false;\n          this.countdown = 0;\n        },\n        (error) => {\n          this.toastr.error('Failed to stop timer.');\n          console.error(error);\n        }\n      );\n    }\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}