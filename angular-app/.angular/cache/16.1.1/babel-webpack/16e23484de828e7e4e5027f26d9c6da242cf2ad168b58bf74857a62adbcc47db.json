{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nexport let TimerComponent = class TimerComponent {\n  constructor(toastr, timerService) {\n    this.toastr = toastr;\n    this.timerService = timerService;\n    this.timerConfig = {\n      autoStart: false,\n      interval: 0\n    };\n    this.countdown = {\n      autoStart: false,\n      interval: 0\n    };\n    this.countdown1 = {\n      autoStart: false,\n      interval: 0\n    };\n    this.hours = 0;\n    this.minutes = 0;\n    this.seconds = 0;\n    this.minutes1 = 0;\n    this.seconds1 = 0;\n    this.isTimerRunning = false;\n    this.isTimerRunning1 = false;\n  }\n  ngOnInit() {\n    this.loadTimerConfiguration();\n  }\n  loadTimerConfiguration() {\n    this.timerService.getTime().subscribe(response => {\n      console.log(\"Response\", response);\n      this.timerConfig = response;\n      this.isTimerRunning1 = true;\n      this.countdown1 = response;\n      if (this.timerConfig.autoStart == true) this.startTimer();\n      // this.updateCountdown1();\n    }, error => {\n      this.toastr.error('Failed to load timer configuration.');\n      console.error(error);\n    });\n  }\n  startTimer() {\n    this.timerService.getTime().subscribe(response => {\n      this.timerConfig = response;\n      this.isTimerRunning = true;\n      this.countdown = response;\n      this.toastr.success('Timer started.');\n      this.updateCountdown();\n    }, error => {\n      this.toastr.error('Failed to start timer.');\n      console.error(error);\n    });\n  }\n  stopTimer() {\n    this.timerService.stopTimer().subscribe(() => {\n      this.isTimerRunning = false;\n      this.toastr.success('Timer stopped.');\n    }, error => {\n      this.toastr.error('Failed to stop timer.');\n      console.error(error);\n    });\n  }\n  updateCountdown() {\n    if (this.isTimerRunning && this.countdown.interval > 0) {\n      setTimeout(() => {\n        this.countdown.interval--;\n        console.log(this.countdown);\n        if (this.countdown.interval > 3600) {\n          this.hours = Math.floor(this.countdown.interval / 3600);\n          this.minutes = Math.floor((this.countdown.interval - this.hours * 3600) / 60);\n          this.seconds = this.countdown.interval - this.hours * 3600 - this.minutes * 60;\n        } else if (this.countdown.interval > 60) {\n          this.hours = 0;\n          this.minutes = Math.floor(this.countdown.interval / 60);\n          this.seconds = this.countdown.interval - this.minutes * 60;\n        } else {\n          this.hours = 0;\n          this.minutes = 0;\n          this.seconds = this.countdown.interval;\n        }\n        this.updateCountdown();\n      }, 1000);\n    } else {\n      this.toastr.success('Countdown completed.');\n      //Tell BE that timer has stopped\n      this.timerService.stopTimer().subscribe(() => {\n        this.isTimerRunning = false;\n        this.countdown.interval = 0;\n      }, error => {\n        this.toastr.error('Failed to stop timer.');\n        console.error(error);\n      });\n    }\n  }\n};\nTimerComponent = __decorate([Component({\n  selector: 'app-timer',\n  templateUrl: './timer.component.html',\n  styleUrls: ['./timer.component.css']\n})], TimerComponent);","map":{"version":3,"names":["Component","TimerComponent","constructor","toastr","timerService","timerConfig","autoStart","interval","countdown","countdown1","hours","minutes","seconds","minutes1","seconds1","isTimerRunning","isTimerRunning1","ngOnInit","loadTimerConfiguration","getTime","subscribe","response","console","log","startTimer","error","success","updateCountdown","stopTimer","setTimeout","Math","floor","__decorate","selector","templateUrl","styleUrls"],"sources":["D:\\Alvie-Personal-Projects\\HartInterCivic\\angular-app\\src\\app\\timer\\timer.component.ts"],"sourcesContent":["import { Component } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { ToastrService } from 'ngx-toastr';\nimport { TimerConfiguration, TimerService } from '../services/timer.service';\n\n@Component({\n  selector: 'app-timer',\n  templateUrl: './timer.component.html',\n  styleUrls: ['./timer.component.css']\n})\n\nexport class TimerComponent {\n\n  timerConfig: TimerConfiguration = {autoStart: false, interval: 0};\n  countdown: TimerConfiguration = {autoStart: false, interval: 0};\n  countdown1: TimerConfiguration = {autoStart: false, interval: 0};\n  hours: number = 0;\n  minutes: number = 0;\n  seconds: number = 0;\n  minutes1: number = 0;\n  seconds1: number = 0;\n  isTimerRunning: boolean = false;\n  isTimerRunning1: boolean = false;\n  constructor(private toastr: ToastrService, private timerService: TimerService) { }\n\n  ngOnInit() {\n    this.loadTimerConfiguration();\n  }\n\n  loadTimerConfiguration() {\n    this.timerService.getTime()\n      .subscribe(\n        (response) => {\n          console.log(\"Response\", response);\n          this.timerConfig = response;\n          this.isTimerRunning1 = true;\n          this.countdown1 = response;\n          if(this.timerConfig.autoStart == true)\n            this.startTimer();\n          // this.updateCountdown1();\n        },\n        (error) => {\n          this.toastr.error('Failed to load timer configuration.');\n          console.error(error);\n        }\n      );\n  }\n\n  startTimer() {\n    this.timerService.getTime()\n      .subscribe(\n        (response) => {\n          this.timerConfig = response;\n          this.isTimerRunning = true;\n          this.countdown = response;\n          this.toastr.success('Timer started.');\n\n          this.updateCountdown();\n        },\n        (error) => {\n          this.toastr.error('Failed to start timer.');\n          console.error(error);\n        }\n      );\n  }\n\n  stopTimer() {\n    this.timerService.stopTimer()\n      .subscribe(\n        () => {\n          this.isTimerRunning = false;\n          this.toastr.success('Timer stopped.');\n        },\n        (error) => {\n          this.toastr.error('Failed to stop timer.');\n          console.error(error);\n        }\n      );\n  }\n\n  updateCountdown() {\n    if (this.isTimerRunning && this.countdown.interval > 0) {\n      setTimeout(() => {\n        this.countdown.interval--;\n        console.log(this.countdown);\n        if (this.countdown.interval > 3600) {\n          this.hours = Math.floor(this.countdown.interval / 3600);\n          this.minutes = Math.floor((this.countdown.interval - this.hours * 3600) / 60);\n          this.seconds = this.countdown.interval - this.hours * 3600 - this.minutes * 60;\n        }\n        else if (this.countdown.interval > 60) {\n          this.hours = 0;\n          this.minutes = Math.floor(this.countdown.interval / 60);\n          this.seconds = this.countdown.interval - this.minutes * 60;\n        } else {\n          this.hours = 0;\n          this.minutes = 0;\n          this.seconds = this.countdown.interval;\n        }\n        this.updateCountdown();\n      }, 1000);\n    } else {\n      this.toastr.success('Countdown completed.');\n      //Tell BE that timer has stopped\n      this.timerService.stopTimer()\n        .subscribe(\n          () => {\n            this.isTimerRunning = false;\n            this.countdown.interval = 0;\n          },\n          (error) => {\n            this.toastr.error('Failed to stop timer.');\n            console.error(error);\n          }\n        );\n    }\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}